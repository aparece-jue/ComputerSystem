---
date: 2025-07-02
tags:
  - "#GDB"
---
# GDB
## 程序控制类命令
| 命令               | 作用                |
| ---------------- | ----------------- |
| `run` / `r`      | 启动程序              |
| `continue` / `c` | 继续执行程序            |
| `next` / `n`     | 单步执行，**跳过函数调用**   |
| `step` / `s`     | 单步执行，**进入函数内部**   |
| `finish`         | 执行到当前函数结束并返回      |
| `until`          | 执行到某一行或循环出口       |
| `start`          | 从 `main` 开始并停在第一行 |
| `return`         | 提前从当前函数返回         |
| `kill`           | 终止调试中的程序          |
## 断点设置
|命令|作用|
|---|---|
|`break <行号>` / `b <行号>`|在指定行设置断点|
|`break <函数名>`|在函数入口设置断点|
|`break <文件>:<行号>`|在指定文件中的指定行设置断点|
|`tbreak <位置>`|临时断点，命中一次就自动删除|
|`info breakpoints`|查看当前所有断点|
|`delete <编号>`|删除指定断点|
|`enable <编号>` / `disable <编号>`|启用 / 禁用某个断点|
|`condition <编号> <条件>`|为某个断点设置触发条件|
|`watch <变量>`|观察变量值是否变化（读写）|
|`rwatch <变量>` / `awatch`|观察变量被读 / 被访问|
## 变量查看
| 命令                  | 作用              |
| ------------------- | --------------- |
| `print <表达式>` / `p` | 打印表达式结果         |
| `display <表达式>`     | 每次暂停自动显示该表达式    |
| `set var <变量>=值`    | 修改变量的值          |
| `info locals`       | 查看当前函数中所有局部变量   |
| `info args`         | 查看当前函数的参数       |
| `whatis <变量>`       | 查看变量类型          |
| `ptype <变量>`        | 查看变量的详细类型（结构体等） |
- `print`
	- 默认以十进制输出。
	- `/x`，以十六进制输出。
	- `/t`，以二进制输出。
	- 目标可以使用寻址方式给出。
	- `* ptr`给出目标地址的值，可以通过强制类型转换来指定显示数据位数。
### print的/x
- `x/[数量][格式][单位] 地址`
#### 格式
|格式|含义|
|---|---|
|`x`|十六进制|
|`d`|有符号十进制|
|`u`|无符号十进制|
|`o`|八进制|
|`t`|二进制|
|`f`|浮点数|
|`a`|地址|
|`c`|字符|
|`s`|字符串|
|`i`|汇编指令|
#### 单位(数据宽度)
| 单位  | 大小           |
| --- | ------------ |
| `b` | 字节 (1 byte)  |
| `h` | 半字 (2 bytes) |
| `w` | 字 (4 bytes)  |
| `g` | 双字 (8 bytes) |
### set指令
- GDB 的 `set` 命令语法要求 **赋值目标必须是一个“完整的表达式”**，而 `*(int*)p = val` 在 GDB 中的解析不够明确。
- 可以使用`set {类型} 地址 = 值`将指定地址作为特定类型赋值。
- 对象可以为`$`+`寄存器名`
## 内存与汇编类
| 命令                          | 作用                   |
| --------------------------- | -------------------- |
| `x/<格式><单位> <地址>`           | 显示内存内容               |
| 示例：`x/4xb &var`             | 查看 `var` 起始的4字节十六进制值 |
| 示例：`x/16i $rip`             | 查看从当前指令指针起的16条汇编     |
| `info registers` / `i r`    | **查看所有寄存器**          |
| `layout asm` / `layout src` | 启用 TUI 显示汇编 / 源码     |
| `disassemble <函数>`/`disas`  | 反汇编某函数               |
- `disas [起始地址][终止地址]`
	- 用于反汇编指定地址附近的函数或反汇编指定范围的代码。
	- 不接参数是返回当前函数。
## 堆栈与函数调用
| 命令                 | 作用           |
| ------------------ | ------------ |
| `backtrace` / `bt` | 查看调用栈        |
| `frame <编号>`       | 切换到指定栈帧      |
| `up` / `down`      | 向上 / 向下切换栈帧  |
| `info frame`       | **查看当前栈帧信息** |
| `return <值>`       | 模拟函数返回某值     |
## 调试文件
| 命令                  | 作用               |
| ------------------- | ---------------- |
| `file <文件名>`        | 加载可执行文件          |
| `symbol-file <文件名>` | 加载符号信息（如 .o/.so） |
| `set args <参数>`     | 设置程序运行参数         |
| `core <core 文件>`    | 加载 core dump 调试  |
## 其他
|命令|作用|
|---|---|
|`help`|查看帮助|
|`info`|查看各种信息（断点、变量等）|
|`set pagination off`|取消分页输出|
|`quit` / `q`|退出 GDB|
